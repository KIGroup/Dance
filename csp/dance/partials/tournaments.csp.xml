<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<CSP name="dance/partials/tournaments.csp" application="/csp/dance/" default="1"><![CDATA[
<div class="row-fluid">
	<div class="row-fluid">
		<div class="span8">
			<label style="padding: 5px 5px 0 5px; font-weight: bold;" ng-bind="'Tournaments'|localize"></label>
		</div>
		<div class="span4">
			<select class="span6 pull-right" title="{{'Tournament status'|localize}}" style="margin-bottom: 0; border-bottom:none; border-bottom-left-radius: 0; border-bottom-right-radius: 0;" ng-model="pageStore.tournaments.gridTournaments.filterStatusId" ng-options="status.id as status.name for status in page.tournamentTable.statuses" ng-change="page.tournamentTable.refresh()">
                <option value="">-- {{'Status'|localize}} --</option>
            </select>
            <select class="span6 pull-right" title="{{'Tournament rank'|localize}}" style="margin-bottom: 0; border-bottom:none; border-bottom-left-radius: 0; border-bottom-right-radius: 0;" ng-model="pageStore.tournaments.gridTournaments.filterRankId" ng-options="rank.id as rank.name for rank in page.tournamentTable.ranks" ng-change="page.tournamentTable.refresh()">
                <option value="">-- {{'Rank'|localize}} --</option>
            </select>
        </div>
	</div>
	<div class="row-fluid">
	    <stcgrid style="border-radius: 4px 0 4px 4px;"
	    	grid="pageStore.tournaments.gridTournaments"
		    table-class="table table-bordered table-hover"
		    caption="''"
		    columns="page.tournamentTable.columns"
		    items="page.tournamentTable.items"
		    properties="page.tournamentTable.properties"
		    update-items="page.tournamentTable.loadItems(pageCurr, pageSize, sqlName, isDown, searchSqlName, searchText)"

		    page-curr="page.tournamentTable.pageCurr"
		    page-total="page.tournamentTable.pageTotal"
		    page-size="page.tournamentTable.pageSize"
		    navigator-visible="true"

		    selectable="true"
		    selected-items="page.tournamentTable.selectedItems"
		    multi-select-mode="page.tournamentTable.multiSelectMode"
 			on-select="page.tournamentTable.onSelect(item)"
 			on-select-cell="page.tournamentTable.onSelectCell(item, property)"

 			action-column-visible="menu.readOnlyMode"
		    action-column-icon="'fa fa-plus-circle'"
		    action-column-title="'Add'|localize"
		    action-column-method="page.tournamentTable.add()"

		    first-row-action-icon="'fa fa-pencil'"
		    first-row-action-title="'Edit'|localize"
		    first-row-action-method="page.tournamentTable.edit(item)"
	    	
	    	second-row-action-icon="'fa fa-times'"
		    second-row-action-title="'Remove'|localize"
		    second-row-action-method="page.tournamentTable.remove(item)"
	    	
 			forcibly-update="page.tournamentTable.forciblyUpdate"
		/>
	</div>
</div>

<div class="row-fluid" ng-show="page.tournamentTable.selectedItems.length==0">
	<div class="span1">
	</div>
	<div class="span10" style="text-align: center;">
		<i ng-bind="'Выберите турнир для отображения подробной информации.'|localize"></i>
	</div>
	<div class="span1">
	</div>
</div>	

<div class="row-fluid" ng-hide="page.tournamentTable.selectedItems.length==0">
	 <tabset>
		<tab heading="{{'Информация'|localize}}">
			<div class="span6">
				<p><span class="spnTitle" ng-bind="'Name'|localize"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].name"></span></p>
				<p><span class="spnTitle" ng-bind="('City'|localize) + ', ' + ('Country'|localize)"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].location.cityName + ', ' + page.tournamentTable.selectedItems[0].location.country.name"></span></p>
				<p><span class="spnTitle" ng-hide="page.tournamentTable.selectedItems[0].organizer.info==''" ng-bind="'Organizer'|localize"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].organizer.info"></span></p>
				<p><span class="spnTitle" ng-hide="page.tournamentTable.selectedItems[0].organizer.site==''" ng-bind="'Organizer web-site'|localize" ></span>: <span ng-bind="page.tournamentTable.selectedItems[0].organizer.site"></span></p>
			</div>
			<div class="span6">
				<p><span class="spnTitle" ng-bind="'Start date / end date'|localize"></span>: <span ng-bind="(page.tournamentTable.selectedItems[0].startDate|convertCacheDate:('d MMMM y'|localize)) + ' / ' + (page.tournamentTable.selectedItems[0].endDate|convertCacheDate:('d MMMM y'|localize))"></span></p>
				<p><span class="spnTitle" ng-bind="'Rank'|localize"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].rank.name"></span></p>
				<p><span class="spnTitle" ng-bind="'Status'|localize"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].status.name"></span></p>
				<p><span class="spnTitle" ng-bind="'Total competitions'|localize"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].competitionsCount"></span></p>
				<p><span class="spnTitle" ng-bind="'Total participants / unique'|localize"></span>: <span ng-bind="page.tournamentTable.selectedItems[0].participantsCount+' / '+page.tournamentTable.selectedItems[0].participantsUniqueCount"></span></p>
			</div>
		</tab>
		<tab heading="{{('Группы'|localize) + ' (' + page.competitionTable.itemsTotal + ')'}}"  active="pageStore.tournaments.tabCompetitionsActive">
			<div class="row-fluid">
				<button type="button" style="margin-bottom: 15px; font-size: 1em; margin-right: 10px;" class="btn btn-mini btnRadio" ng-model="pageStore.tournaments.gridCompetitions.filterDate" btn-radio="''" ng-bind="'All days'|localize" ng-click="page.competitionTable.changeDateFilter('')"></button>
				<div class="btn-group" style="margin-bottom: 15px;">
					<button type="button" class="btn btn-mini btnRadio" ng-repeat="cdate in page.competitionTable.dates" ng-model="pageStore.tournaments.gridCompetitions.filterDate" btn-radio="cdate" ng-bind="cdate|convertCacheDate:('d MMMM y'|localize)" ng-click="page.competitionTable.changeDateFilter(cdate)"></button>
				</div>
				<span class="pull-right" ng-bind="('Total prticipants count'|localize) + ' - ' + page.tournamentTable.participantsInfo.total + ', ' + ('unique'|localize) + ' - ' + page.tournamentTable.participantsInfo.unique"></span>
			</div>
			<div class="row-fluid">
				<stcgrid
			    	grid="pageStore.tournaments.gridCompetitions"
				    table-class="table table-bordered table-hover"
				    caption="''"
				    columns="page.competitionTable.columns"
				    items="page.competitionTable.items"
				    properties="page.competitionTable.properties"
				    update-items="page.competitionTable.loadItems(pageCurr, pageSize, sqlName, isDown, searchSqlName, searchText)"

				    page-curr="page.competitionTable.pageCurr"
				    page-total="page.competitionTable.pageTotal"
				    page-size="page.competitionTable.pageSize"
				    navigator-visible="true"
				    search-hide="true"

				    selectable="true"
				    selected-items="page.competitionTable.selectedItems"
				    multi-select-mode="page.competitionTable.multiSelectMode"
					on-select="page.competitionTable.onSelect(item)"
					on-select-cell="page.competitionTable.onSelectCell(item, property)"

		 			action-column-visible="menu.readOnlyMode"
				    action-column-icon="'fa fa-plus-circle'"
				    action-column-title="'add'|localize"
				    action-column-method="page.competitionTable.add()"

				    first-row-action-icon="'fa fa-pencil'"
				    first-row-action-title="'Edit'|localize"
				    first-row-action-method="page.competitionTable.edit(item)"
			    	
			    	second-row-action-icon="'fa fa-times'"
				    second-row-action-title="'Remove'|localize"
				    second-row-action-method="page.competitionTable.remove(item)"
				    	
					forcibly-update="page.competitionTable.forciblyUpdate"
				/>
			</div>			
		</tab>	
	</tabset>
</div>
<br>


<stcalert data="page.alert"/>
]]></CSP>
</Export>
