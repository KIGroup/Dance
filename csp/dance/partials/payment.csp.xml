<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<CSP name="dance/partials/payment.csp" application="/csp/dance/" default="1"><![CDATA[
<div class="row-fluid">
	<pre ng-bind="page.tournament.fullName" style="text-align: center; font-weight: bold; font-size: 1.3em !important;">
	</pre>
</div>  
<br>
<div class="row-fluid" style="text-align: center;">
	<a ng-href="#/tournament/{{page.tournament.id}}/registration" class="cellLink" title="{{'Регистрация участников на турнир'|localize}}" ng-bind="'Регистрация участников »'|localize"></a>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a ng-href="#/tournament/{{page.tournament.id}}/competitions" class="cellLink" title="{{'Список всех групп турнира'|localize}}" ng-bind="'Cписок всех групп »'|localize"></a>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a ng-href="#/tournament/{{page.tournament.id}}/participants" class="cellLink" title="{{'Список всех уникальных участников турнира'|localize}}" ng-bind="'Список всех участников »'|localize"></a>
</div>
<br>


<stcalert data="page.registrationAlert" style="margin: 10px 0 20px 0;"/>

<p>[ <font COLOR="RED"><b>!</b></font> ] {{'Щелчком мыши выберите необходимые группы для передачи данных в платежную систему.'|localize}}</p>

<!-- Competitions -->
<div class="row-fluid" style="padding-top: 10px;">
	<div class="span8">
		<span style="font-weight: bold;" ng-show="page.couple.man.id==page.couple.woman.id" ng-bind="('Группы участника'|localize) + ' ″' + page.couple.man.lastName + ' ' + page.couple.man.firstName +  '″; ' + 'Клуб' + ' ″' + page.couple.otherInfo.club + '″'"></span>
		<span style="font-weight: bold;" ng-hide="page.couple.man.id==page.couple.woman.id" ng-bind="('Группы пары'|localize) + ' ″' + page.couple.man.lastName + ' ' + page.couple.man.firstName + ' - ' + page.couple.woman.lastName + ' ' + page.couple.woman.firstName +  '″; ' + 'Клуб' + ' ″' + page.couple.otherInfo.club + '″'"></span>
	</div>
	<div class="span4">
		<div class="btn-group pull-right">
			<button type="button" class="btn btn-mini btnRadio" ng-model="pageStore.tournamentPayment.gridCompetitions.tableShortView" btn-radio="true" ng-bind="'Коротко'|localize" title="{{'Скрывать дополнительные столбцы'|localize}}" ng-click="page.competitionTable.setHiddenCoulumns(true)"></button>
			<button type="button" class="btn btn-mini btnRadio" ng-model="pageStore.tournamentPayment.gridCompetitions.tableShortView" btn-radio="false" ng-bind="'Детально'|localize" title="{{'Отображать дополнительные столбцы'|localize}}" ng-click="page.competitionTable.setHiddenCoulumns(false)"></button>
		</div>
	</div> 
</div>
<div class="row-fluid">
	<stcgrid
    	grid="pageStore.tournamentDetails.gridCompetitions"
	    table-class="table table-bordered table-hover"
	    caption="''"
	    columns="page.competitionTable.columns"
	    items="page.competitionTable.items"
	    properties="page.competitionTable.properties"
	    update-items="page.competitionTable.loadItems(pageCurr, pageSize, sqlName, isDown, searchSqlName, searchText)"

	    page-curr="page.competitionTable.pageCurr"
	    page-total="page.competitionTable.pageTotal"
	    page-size="page.competitionTable.pageSize"
	    navigator-visible="false"
	    search-hide="true"

	    selectable="true"
	    selected-items="page.competitionTable.selectedItems"
	    multi-select-mode="page.competitionTable.multiSelectMode"
		on-select="page.competitionTable.onSelect(item)"
		
		action-column-visible="false"
		forcibly-update="page.competitionTable.forciblyUpdate"
	/>
</div>			

<button type="button" class="btn btn-small" ng-click="page.openConfirmDlg()" ng-disabled="page.competitionTable.selectedItems.length==0"><i class="fa fa-shopping-cart"></i>&nbsp;&nbsp;{{'Оплатить на danceplat.ru'}}</button>


<div class="row-fluid">
	<div class="span4">
		<div>
			<danceplat-udsr-pay 
				id="danceplatUdsrPay"

				ng-hide="page.couple.man.numberWDSF != '' && page.couple.man.numberUDSR == ''"
				
				trn-id="page.tournament.idInternal"
				man-number-udsr="page.couple.man.numberUDSR"
				woman-number-udsr="page.couple.woman.numberUDSR"
				competitions="page.competitionList"
				hide-all="true"
				btn-name="''"/>
		</div>
		<div>
			<danceplat-other-pay 
				id="danceplatOtherPay"
				
				ng-show="page.couple.man.numberWDSF != '' && page.couple.man.numberUDSR == ''"

				trn-id="page.tournament.idInternal"

				male-age="page.couple.man.dob"
				male-last-name="page.couple.man.lastName"
				male-first-name="page.couple.man.firstName"

				female-age="page.couple.woman.dob"
				female-last-name="page.couple.woman.lastName"
				female-first-name="page.couple.woman.firstName"

				country="page.couple.otherInfo.country.name"
				city="page.couple.otherInfo.city"
				club="page.couple.otherInfo.club"
				trainer="page.couple.otherInfo.mainTrainer"

				competitions="page.competitionList"
				hide-all="true"
				btn-name="''"/>
		</div>
	</div>
	<div class="span8">
		<span class="pull-right" ng-bind="('Выбрано'|localize) + ' ' + page.competitionTable.selectedItems.length + ' ' + ('групп из'|localize) + ' ' + page.competitionTable.itemsTotal"></span>
	</div>
</div>	
<br>
<stcalert data="page.alert"/>

<p ng-show="page.conflictTable.manCompetitions.length != 0 || page.conflictTable.womanCompetitions.length != 0" style="text-align: justify;">[ <font COLOR="RED"><b>!</b></font> ] {{'Конфликтные группы участника - это группы из других турниров, в которых зарегистрирован участник. Дата конфликтной группы совпадает с одной из дат групп выбранного турнира(заголовок сверху). Публикация списка конфликтных групп предназначена лишь для информирования участников.'|localize}}</p>

<div class="row-fluid" ng-show="page.conflictTable.manCompetitions.length != 0">
	<stcgrid
    	grid="pageStore.tournamentDetails.gridManCompetitions"
	    table-class="table table-bordered table-hover"
	    caption="('Конфликтные группы для '|localize) + '\'' + page.couple.man.lastName + ' ' + page.couple.man.firstName + '\''"
	    columns="page.conflictTable.columns"
	    items="page.conflictTable.manCompetitions"
	    properties="page.conflictTable.properties"
	    page-curr="1"
	    page-total="1"
	    page-size="100"
	    search-hide="true"

	   	selected-items="page.conflictTable.selectedItems"
	    multi-select-mode="page.conflictTable.multiSelectMode"

	    on-select-cell="page.conflictTable.onSelectCell(item, property)"
	/>
</div>		

<div class="row-fluid"  ng-show="page.conflictTable.womanCompetitions.length != 0 && page.couple.man.id != page.couple.woman.id">
	<stcgrid
    	grid="pageStore.tournamentDetails.gridWomanCompetitions"
	    table-class="table table-bordered table-hover"
	    caption="('Конфликтные группы для '|localize) + '\'' + page.couple.woman.lastName + ' ' + page.couple.woman.firstName + '\''"
	    columns="page.conflictTable.columns"
	    items="page.conflictTable.womanCompetitions"
	    properties="page.conflictTable.properties"
	    page-curr="1"
	    page-total="1"
	    page-size="100"
	    search-hide="true"

	   	selected-items="page.conflictTable.selectedItems"
	    multi-select-mode="page.conflictTable.multiSelectMode"

	    on-select-cell="page.conflictTable.onSelectCell(item, property)"
	/>
</div>		



<div class="modal" id="ConfirmModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="ConfirmLabel" aria-hidden="true" ng-show="page.confirmModalVisible">
 	<div class="modal-header">
 		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"  ng-click="page.confirmModalVisible=false">×</button>
		<h4 id="ConfirmLabel" ng-bind="'Данные для передачи в платежную систему'|localize"></h4>
	</div>
	<div class="modal-body">
		<!-- Man -->
		<div class="row-fluid">
			<div class="span8">
		        <div class="control-group">
		        	<label class="control-label" style="font-weight: bold;" ng-bind="('Партнер'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" value="{{page.confirmData.couple.man.lastName + ' ' + page.confirmData.couple.man.firstName}}" required ng-disabled="true"></input>
                	</div>
		    	</div>
			</div>
			<div class="span4">
		        <div class="control-group">
		        	<label class="control-label" ng-bind="('Дата рождения'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" datepicker-popup="{{'d MMMM y'|localize}}" ng-model="page.confirmData.couple.man.dob" show-weeks="false" ng-required="true"/>
                	</div>
		    	</div>
			</div>
		</div>
		<!-- Woman -->
		<div class="row-fluid">
			<div class="span8">
		        <div class="control-group">
		        	<label class="control-label" style="font-weight: bold;" ng-bind="('Партнерша'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" value="{{page.confirmData.couple.woman.lastName + ' ' + page.confirmData.couple.woman.firstName}}" required ng-disabled="true"></input>
                	</div>
		    	</div>
			</div>
			<div class="span4">
		        <div class="control-group">
		        	<label class="control-label" ng-bind="('Дата рождения'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" datepicker-popup="{{'d MMMM y'|localize}}" ng-model="page.confirmData.couple.woman.dob" show-weeks="false" ng-required="true"/>
                	</div>
		    	</div>
			</div>
		</div>
		<!-- Other Info -->
		<p><span style="font-weight: bold;" ng-bind="('Дополнительная информация'|localize) + ':'"></span></p>
		<div class="row-fluid">
			<div class="span6">
		        <div class="control-group">
		        	<label class="control-label" ng-bind="('Страна'|localize) + '*'"></label>
		        	<div class="controls">
		    			<select class="span12" ng-model="page.confirmData.couple.otherInfo.country" ng-options="country as country.name for country in page.countries" ng-disabled="page.newCouple.fieldsDisabled">
			            </select> 
                	</div>
		    	</div>
			</div>
			<div class="span6">
		        <div class="control-group">
		        	<label class="control-label" ng-bind="('Город'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" ng-model="page.confirmData.couple.otherInfo.city" required></input>
                	</div>
		    	</div>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span6">
		        <div class="control-group">
		        	<label class="control-label" ng-bind="('Клуб'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" ng-model="page.confirmData.couple.otherInfo.club" required></input>
                	</div>
		    	</div>
			</div>
			<div class="span6">
		        <div class="control-group">
		        	<label class="control-label" ng-bind="('Главный тренер'|localize) + '*'"></label>
		        	<div class="controls">
		    			<input class="span12" type="text" ng-model="page.confirmData.couple.otherInfo.mainTrainer" required></input>
                	</div>
		    	</div>
			</div>
		</div>

		<p style="margin: 0 0 2px;"><span style="font-weight: bold;" ng-bind="('Группы'|localize) + ':'"></span></p>
		<p style="margin: 0 0 2px;" ng-repeat="cmp in page.competitionTable.selectedItems"><span ng-bind="($index+1) + '. ' + cmp.competition.name"></span></p>
		<br>
		<div class="control-group">
   			<button type="button" class="btn btn-small" ng-click="page.goToPaymentSystem(page.confirmData.formId); page.closeConfirmDlg()"><i class="fa fa-download"></i>&nbsp;{{('Передать данные'|localize)}}</button>
   			<button type="button" class="btn btn-small pull-right" ng-click="page.closeConfirmDlg()"><i class="fa fa-ban"></i>&nbsp;{{('Отмена'|localize)}}</button>
    	</div>
    </div>
</div>
]]></CSP>
</Export>
